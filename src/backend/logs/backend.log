2025-03-15 19:59:14,919 - app.main - INFO - Backend logging initialized. Log file: /Volumes/bdrive/repos/optionstrat/src/backend/logs/backend.log
2025-03-15 19:59:23,220 - app.main - INFO - REQUEST: POST /debug/clear-logs?type=frontend from 127.0.0.1
2025-03-15 19:59:23,221 - app.main - INFO - RESPONSE: POST /debug/clear-logs - Status: 200 - Time: 0.0010s
2025-03-15 19:59:23,387 - app.main - INFO - REQUEST: OPTIONS /debug/clear-logs?type=frontend from 127.0.0.1
2025-03-15 19:59:23,388 - app.main - INFO - RESPONSE: OPTIONS /debug/clear-logs - Status: 200 - Time: 0.0002s
2025-03-15 19:59:23,389 - app.main - INFO - REQUEST: POST /debug/clear-logs?type=frontend from 127.0.0.1
2025-03-15 19:59:23,389 - app.main - INFO - RESPONSE: POST /debug/clear-logs - Status: 200 - Time: 0.0004s
2025-03-15 19:59:23,416 - app.main - INFO - REQUEST: GET /positions/? from 127.0.0.1
2025-03-15 19:59:23,423 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-15 19:59:23,423 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: AAPL
2025-03-15 19:59:23,423 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:AAPL
2025-03-15 19:59:23,427 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache miss, fetching stock price for ticker: AAPL
2025-03-15 19:59:23,427 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Creating yfinance Ticker object for AAPL
2025-03-15 19:59:23,427 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Attempting to get price from fast_info for AAPL
2025-03-15 19:59:23,427 - yfinance - DEBUG - Entering history()
2025-03-15 19:59:23,429 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_kv" ("key" VARCHAR(255) NOT NULL PRIMARY KEY, "value" VARCHAR(255)) WITHOUT ROWID', [])
2025-03-15 19:59:23,429 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['AAPL', 1, 0])
2025-03-15 19:59:23,460 - yfinance - DEBUG -  Entering history()
2025-03-15 19:59:23,460 - yfinance - DEBUG - AAPL: Yahoo GET parameters: {'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-15 19:59:23,460 - yfinance - DEBUG -   Entering get()
2025-03-15 19:59:23,460 - yfinance - DEBUG -    Entering _make_request()
2025-03-15 19:59:23,460 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/AAPL
2025-03-15 19:59:23,460 - yfinance - DEBUG - params={'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-15 19:59:23,460 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-15 19:59:23,460 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-15 19:59:23,460 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-15 19:59:23,461 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_cookieschema" ("strategy" VARCHAR(255) NOT NULL PRIMARY KEY, "fetch_date" DATETIME NOT NULL, "cookie_bytes" BLOB NOT NULL) WITHOUT ROWID', [])
2025-03-15 19:59:23,461 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['basic', 1, 0])
2025-03-15 19:59:23,462 - yfinance - DEBUG - loaded persistent cookie
2025-03-15 19:59:23,462 - yfinance - DEBUG - reusing cookie
2025-03-15 19:59:23,467 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query1.finance.yahoo.com:443
2025-03-15 19:59:23,565 - urllib3.connectionpool - DEBUG - https://query1.finance.yahoo.com:443 "GET /v1/test/getcrumb HTTP/1.1" 200 11
2025-03-15 19:59:23,566 - yfinance - DEBUG - crumb = 'IKqTE59qPrl'
2025-03-15 19:59:23,566 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-15 19:59:23,566 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-15 19:59:23,566 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query2.finance.yahoo.com:443
2025-03-15 19:59:23,698 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/AAPL?range=1y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=IKqTE59qPrl HTTP/1.1" 200 None
2025-03-15 19:59:23,699 - yfinance - DEBUG - response code=200
2025-03-15 19:59:23,699 - yfinance - DEBUG -    Exiting _make_request()
2025-03-15 19:59:23,699 - yfinance - DEBUG -   Exiting get()
2025-03-15 19:59:23,705 - yfinance - DEBUG - AAPL: yfinance received OHLC data: 2024-03-15 13:30:00 -> 2025-03-14 13:30:00
2025-03-15 19:59:23,710 - yfinance - DEBUG - AAPL: OHLC after cleaning: 2024-03-15 09:30:00-04:00 -> 2025-03-14 09:30:00-04:00
2025-03-15 19:59:23,718 - yfinance - DEBUG - AAPL: OHLC after combining events: 2024-03-15 00:00:00-04:00 -> 2025-03-14 00:00:00-04:00
2025-03-15 19:59:23,719 - yfinance - DEBUG - AAPL: yfinance returning OHLC: 2024-03-15 00:00:00-04:00 -> 2025-03-14 00:00:00-04:00
2025-03-15 19:59:23,719 - yfinance - DEBUG -  Exiting history()
2025-03-15 19:59:23,719 - yfinance - DEBUG - Exiting history()
2025-03-15 19:59:23,722 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: fast_info price for AAPL: 213.49000549316406
2025-03-15 19:59:23,722 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Caching price 213.49000549316406 for AAPL with TTL=300
2025-03-15 19:59:23,724 - app.services.yfinance_provider - DEBUG - Saved data to database cache: yfinance:stock_price:AAPL
2025-03-15 19:59:23,724 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Returning price 213.49000549316406 for AAPL
2025-03-15 19:59:23,732 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-15 19:59:23,732 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: AAPL
2025-03-15 19:59:23,732 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:AAPL
2025-03-15 19:59:23,732 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:AAPL
2025-03-15 19:59:23,732 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:AAPL, returning price: 213.49000549316406
2025-03-15 19:59:23,732 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-15 19:59:23,732 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: META
2025-03-15 19:59:23,733 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:META
2025-03-15 19:59:23,734 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache miss, fetching stock price for ticker: META
2025-03-15 19:59:23,734 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Creating yfinance Ticker object for META
2025-03-15 19:59:23,734 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Attempting to get price from fast_info for META
2025-03-15 19:59:23,734 - yfinance - DEBUG - Entering history()
2025-03-15 19:59:23,734 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['META', 1, 0])
2025-03-15 19:59:23,734 - yfinance - DEBUG -  Entering history()
2025-03-15 19:59:23,734 - yfinance - DEBUG - META: Yahoo GET parameters: {'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-15 19:59:23,734 - yfinance - DEBUG -   Entering get()
2025-03-15 19:59:23,734 - yfinance - DEBUG -    Entering _make_request()
2025-03-15 19:59:23,734 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/META
2025-03-15 19:59:23,734 - yfinance - DEBUG - params={'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-15 19:59:23,734 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-15 19:59:23,734 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-15 19:59:23,734 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-15 19:59:23,734 - yfinance - DEBUG - reusing cookie
2025-03-15 19:59:23,734 - yfinance - DEBUG - reusing crumb
2025-03-15 19:59:23,734 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-15 19:59:23,734 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-15 19:59:23,796 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/META?range=1y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=IKqTE59qPrl HTTP/1.1" 200 None
2025-03-15 19:59:23,796 - yfinance - DEBUG - response code=200
2025-03-15 19:59:23,797 - yfinance - DEBUG -    Exiting _make_request()
2025-03-15 19:59:23,797 - yfinance - DEBUG -   Exiting get()
2025-03-15 19:59:23,797 - yfinance - DEBUG - META: yfinance received OHLC data: 2024-03-15 13:30:00 -> 2025-03-14 13:30:00
2025-03-15 19:59:23,798 - yfinance - DEBUG - META: OHLC after cleaning: 2024-03-15 09:30:00-04:00 -> 2025-03-14 09:30:00-04:00
2025-03-15 19:59:23,800 - yfinance - DEBUG - META: OHLC after combining events: 2024-03-15 00:00:00-04:00 -> 2025-03-14 00:00:00-04:00
2025-03-15 19:59:23,801 - yfinance - DEBUG - META: yfinance returning OHLC: 2024-03-15 00:00:00-04:00 -> 2025-03-14 00:00:00-04:00
2025-03-15 19:59:23,801 - yfinance - DEBUG -  Exiting history()
2025-03-15 19:59:23,801 - yfinance - DEBUG - Exiting history()
2025-03-15 19:59:23,801 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: fast_info price for META: 607.5999755859375
2025-03-15 19:59:23,801 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Caching price 607.5999755859375 for META with TTL=300
2025-03-15 19:59:23,803 - app.services.yfinance_provider - DEBUG - Saved data to database cache: yfinance:stock_price:META
2025-03-15 19:59:23,804 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Returning price 607.5999755859375 for META
2025-03-15 19:59:23,804 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-15 19:59:23,804 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: META
2025-03-15 19:59:23,804 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:META
2025-03-15 19:59:23,804 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:META
2025-03-15 19:59:23,804 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:META, returning price: 607.5999755859375
2025-03-15 19:59:23,806 - app.main - INFO - RESPONSE: GET /positions/ - Status: 200 - Time: 0.3895s
2025-03-15 19:59:35,379 - app.main - INFO - REQUEST: GET /api/options/search/A?limit=10 from 127.0.0.1
2025-03-15 19:59:35,380 - app.main - INFO - RESPONSE: GET /api/options/search/A - Status: 404 - Time: 0.0005s
2025-03-15 19:59:35,586 - app.main - INFO - REQUEST: GET /api/options/search/AA?limit=10 from 127.0.0.1
2025-03-15 19:59:35,587 - app.main - INFO - RESPONSE: GET /api/options/search/AA - Status: 404 - Time: 0.0008s
2025-03-15 19:59:36,202 - app.main - INFO - REQUEST: GET /api/options/search/AAP?limit=10 from 127.0.0.1
2025-03-15 19:59:36,203 - app.main - INFO - RESPONSE: GET /api/options/search/AAP - Status: 404 - Time: 0.0007s
2025-03-15 19:59:36,578 - app.main - INFO - REQUEST: GET /api/options/search/AAPL?limit=10 from 127.0.0.1
2025-03-15 19:59:36,579 - app.main - INFO - RESPONSE: GET /api/options/search/AAPL - Status: 404 - Time: 0.0003s
2025-03-15 19:59:52,324 - app.main - INFO - REQUEST: OPTIONS /debug/log? from 127.0.0.1
2025-03-15 19:59:52,324 - app.main - INFO - RESPONSE: OPTIONS /debug/log - Status: 200 - Time: 0.0003s
