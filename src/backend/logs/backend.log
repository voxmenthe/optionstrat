2025-03-16 14:13:42,215 - app.main - INFO - Backend logging initialized. Log file: /Volumes/bdrive/repos/optionstrat/src/backend/logs/backend.log
2025-03-16 14:14:00,024 - app.main - INFO - REQUEST: POST /debug/clear-logs?type=frontend from 127.0.0.1
2025-03-16 14:14:00,025 - app.main - INFO - RESPONSE: POST /debug/clear-logs - Status: 200 - Time: 0.0007s
2025-03-16 14:14:00,209 - app.main - INFO - REQUEST: OPTIONS /debug/clear-logs?type=frontend from 127.0.0.1
2025-03-16 14:14:00,209 - app.main - INFO - RESPONSE: OPTIONS /debug/clear-logs - Status: 200 - Time: 0.0002s
2025-03-16 14:14:00,210 - app.main - INFO - REQUEST: POST /debug/clear-logs?type=frontend from 127.0.0.1
2025-03-16 14:14:00,211 - app.main - INFO - RESPONSE: POST /debug/clear-logs - Status: 200 - Time: 0.0004s
2025-03-16 14:14:00,352 - app.main - INFO - REQUEST: GET /positions/? from 127.0.0.1
2025-03-16 14:14:00,359 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:00,359 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: AAPL
2025-03-16 14:14:00,359 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:AAPL
2025-03-16 14:14:00,363 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache miss, fetching stock price for ticker: AAPL
2025-03-16 14:14:00,363 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Creating yfinance Ticker object for AAPL
2025-03-16 14:14:00,363 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Attempting to get price from fast_info for AAPL
2025-03-16 14:14:00,363 - yfinance - DEBUG - Entering history()
2025-03-16 14:14:00,365 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_kv" ("key" VARCHAR(255) NOT NULL PRIMARY KEY, "value" VARCHAR(255)) WITHOUT ROWID', [])
2025-03-16 14:14:00,365 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['AAPL', 1, 0])
2025-03-16 14:14:00,380 - yfinance - DEBUG -  Entering history()
2025-03-16 14:14:00,381 - yfinance - DEBUG - AAPL: Yahoo GET parameters: {'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-16 14:14:00,381 - yfinance - DEBUG -   Entering get()
2025-03-16 14:14:00,381 - yfinance - DEBUG -    Entering _make_request()
2025-03-16 14:14:00,381 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/AAPL
2025-03-16 14:14:00,381 - yfinance - DEBUG - params={'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-16 14:14:00,381 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-16 14:14:00,381 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-16 14:14:00,381 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-16 14:14:00,381 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_cookieschema" ("strategy" VARCHAR(255) NOT NULL PRIMARY KEY, "fetch_date" DATETIME NOT NULL, "cookie_bytes" BLOB NOT NULL) WITHOUT ROWID', [])
2025-03-16 14:14:00,382 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['basic', 1, 0])
2025-03-16 14:14:00,382 - yfinance - DEBUG - loaded persistent cookie
2025-03-16 14:14:00,382 - yfinance - DEBUG - reusing cookie
2025-03-16 14:14:00,386 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query1.finance.yahoo.com:443
2025-03-16 14:14:00,576 - urllib3.connectionpool - DEBUG - https://query1.finance.yahoo.com:443 "GET /v1/test/getcrumb HTTP/1.1" 200 11
2025-03-16 14:14:00,577 - yfinance - DEBUG - crumb = 'IKqTE59qPrl'
2025-03-16 14:14:00,577 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-16 14:14:00,577 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-16 14:14:00,578 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query2.finance.yahoo.com:443
2025-03-16 14:14:00,725 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/AAPL?range=1y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=IKqTE59qPrl HTTP/1.1" 200 None
2025-03-16 14:14:00,736 - yfinance - DEBUG - response code=200
2025-03-16 14:14:00,736 - yfinance - DEBUG -    Exiting _make_request()
2025-03-16 14:14:00,736 - yfinance - DEBUG -   Exiting get()
2025-03-16 14:14:00,743 - yfinance - DEBUG - AAPL: yfinance received OHLC data: 2024-03-15 13:30:00 -> 2025-03-14 13:30:00
2025-03-16 14:14:00,748 - yfinance - DEBUG - AAPL: OHLC after cleaning: 2024-03-15 09:30:00-04:00 -> 2025-03-14 09:30:00-04:00
2025-03-16 14:14:00,753 - yfinance - DEBUG - AAPL: OHLC after combining events: 2024-03-15 00:00:00-04:00 -> 2025-03-14 00:00:00-04:00
2025-03-16 14:14:00,754 - yfinance - DEBUG - AAPL: yfinance returning OHLC: 2024-03-15 00:00:00-04:00 -> 2025-03-14 00:00:00-04:00
2025-03-16 14:14:00,754 - yfinance - DEBUG -  Exiting history()
2025-03-16 14:14:00,754 - yfinance - DEBUG - Exiting history()
2025-03-16 14:14:00,756 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: fast_info price for AAPL: 213.49000549316406
2025-03-16 14:14:00,756 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Caching price 213.49000549316406 for AAPL with TTL=300
2025-03-16 14:14:00,759 - app.services.yfinance_provider - DEBUG - Saved data to database cache: yfinance:stock_price:AAPL
2025-03-16 14:14:00,759 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Returning price 213.49000549316406 for AAPL
2025-03-16 14:14:00,765 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:00,765 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: AAPL
2025-03-16 14:14:00,765 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:AAPL
2025-03-16 14:14:00,766 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:AAPL
2025-03-16 14:14:00,766 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:AAPL, returning price: 213.49000549316406
2025-03-16 14:14:00,766 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:00,766 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: META
2025-03-16 14:14:00,766 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:META
2025-03-16 14:14:00,768 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache miss, fetching stock price for ticker: META
2025-03-16 14:14:00,768 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Creating yfinance Ticker object for META
2025-03-16 14:14:00,768 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Attempting to get price from fast_info for META
2025-03-16 14:14:00,768 - yfinance - DEBUG - Entering history()
2025-03-16 14:14:00,768 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['META', 1, 0])
2025-03-16 14:14:00,768 - yfinance - DEBUG -  Entering history()
2025-03-16 14:14:00,768 - yfinance - DEBUG - META: Yahoo GET parameters: {'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-16 14:14:00,768 - yfinance - DEBUG -   Entering get()
2025-03-16 14:14:00,768 - yfinance - DEBUG -    Entering _make_request()
2025-03-16 14:14:00,768 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/META
2025-03-16 14:14:00,768 - yfinance - DEBUG - params={'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-16 14:14:00,768 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-16 14:14:00,768 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-16 14:14:00,768 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-16 14:14:00,768 - yfinance - DEBUG - reusing cookie
2025-03-16 14:14:00,768 - yfinance - DEBUG - reusing crumb
2025-03-16 14:14:00,768 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-16 14:14:00,768 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-16 14:14:00,862 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/META?range=1y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=IKqTE59qPrl HTTP/1.1" 200 None
2025-03-16 14:14:00,863 - yfinance - DEBUG - response code=200
2025-03-16 14:14:00,863 - yfinance - DEBUG -    Exiting _make_request()
2025-03-16 14:14:00,863 - yfinance - DEBUG -   Exiting get()
2025-03-16 14:14:00,864 - yfinance - DEBUG - META: yfinance received OHLC data: 2024-03-15 13:30:00 -> 2025-03-14 13:30:00
2025-03-16 14:14:00,864 - yfinance - DEBUG - META: OHLC after cleaning: 2024-03-15 09:30:00-04:00 -> 2025-03-14 09:30:00-04:00
2025-03-16 14:14:00,867 - yfinance - DEBUG - META: OHLC after combining events: 2024-03-15 00:00:00-04:00 -> 2025-03-14 00:00:00-04:00
2025-03-16 14:14:00,867 - yfinance - DEBUG - META: yfinance returning OHLC: 2024-03-15 00:00:00-04:00 -> 2025-03-14 00:00:00-04:00
2025-03-16 14:14:00,867 - yfinance - DEBUG -  Exiting history()
2025-03-16 14:14:00,867 - yfinance - DEBUG - Exiting history()
2025-03-16 14:14:00,868 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: fast_info price for META: 607.5999755859375
2025-03-16 14:14:00,868 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Caching price 607.5999755859375 for META with TTL=300
2025-03-16 14:14:00,870 - app.services.yfinance_provider - DEBUG - Saved data to database cache: yfinance:stock_price:META
2025-03-16 14:14:00,870 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Returning price 607.5999755859375 for META
2025-03-16 14:14:00,871 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:00,871 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: META
2025-03-16 14:14:00,871 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:META
2025-03-16 14:14:00,871 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:META
2025-03-16 14:14:00,871 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:META, returning price: 607.5999755859375
2025-03-16 14:14:00,871 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:00,871 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: IBM
2025-03-16 14:14:00,871 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:IBM
2025-03-16 14:14:00,872 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache miss, fetching stock price for ticker: IBM
2025-03-16 14:14:00,873 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Creating yfinance Ticker object for IBM
2025-03-16 14:14:00,873 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Attempting to get price from fast_info for IBM
2025-03-16 14:14:00,873 - yfinance - DEBUG - Entering history()
2025-03-16 14:14:00,873 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['IBM', 1, 0])
2025-03-16 14:14:00,873 - yfinance - DEBUG -  Entering history()
2025-03-16 14:14:00,873 - yfinance - DEBUG - IBM: Yahoo GET parameters: {'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-16 14:14:00,873 - yfinance - DEBUG -   Entering get()
2025-03-16 14:14:00,873 - yfinance - DEBUG -    Entering _make_request()
2025-03-16 14:14:00,873 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/IBM
2025-03-16 14:14:00,873 - yfinance - DEBUG - params={'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-16 14:14:00,873 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-16 14:14:00,873 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-16 14:14:00,873 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-16 14:14:00,873 - yfinance - DEBUG - reusing cookie
2025-03-16 14:14:00,873 - yfinance - DEBUG - reusing crumb
2025-03-16 14:14:00,873 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-16 14:14:00,873 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-16 14:14:01,039 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/IBM?range=1y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=IKqTE59qPrl HTTP/1.1" 200 None
2025-03-16 14:14:01,039 - yfinance - DEBUG - response code=200
2025-03-16 14:14:01,039 - yfinance - DEBUG -    Exiting _make_request()
2025-03-16 14:14:01,039 - yfinance - DEBUG -   Exiting get()
2025-03-16 14:14:01,041 - yfinance - DEBUG - IBM: yfinance received OHLC data: 2024-03-15 13:30:00 -> 2025-03-14 13:30:00
2025-03-16 14:14:01,041 - yfinance - DEBUG - IBM: OHLC after cleaning: 2024-03-15 09:30:00-04:00 -> 2025-03-14 09:30:00-04:00
2025-03-16 14:14:01,044 - yfinance - DEBUG - IBM: OHLC after combining events: 2024-03-15 00:00:00-04:00 -> 2025-03-14 00:00:00-04:00
2025-03-16 14:14:01,044 - yfinance - DEBUG - IBM: yfinance returning OHLC: 2024-03-15 00:00:00-04:00 -> 2025-03-14 00:00:00-04:00
2025-03-16 14:14:01,044 - yfinance - DEBUG -  Exiting history()
2025-03-16 14:14:01,044 - yfinance - DEBUG - Exiting history()
2025-03-16 14:14:01,045 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: fast_info price for IBM: 248.35000610351562
2025-03-16 14:14:01,045 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Caching price 248.35000610351562 for IBM with TTL=300
2025-03-16 14:14:01,047 - app.services.yfinance_provider - DEBUG - Saved data to database cache: yfinance:stock_price:IBM
2025-03-16 14:14:01,047 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Returning price 248.35000610351562 for IBM
2025-03-16 14:14:01,051 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:01,051 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: IBM
2025-03-16 14:14:01,051 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:IBM
2025-03-16 14:14:01,051 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:IBM
2025-03-16 14:14:01,052 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:IBM, returning price: 248.35000610351562
2025-03-16 14:14:01,052 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:01,052 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: IBM
2025-03-16 14:14:01,052 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:IBM
2025-03-16 14:14:01,052 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:IBM
2025-03-16 14:14:01,052 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:IBM, returning price: 248.35000610351562
2025-03-16 14:14:01,052 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:01,052 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: GS
2025-03-16 14:14:01,052 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:GS
2025-03-16 14:14:01,055 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache miss, fetching stock price for ticker: GS
2025-03-16 14:14:01,055 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Creating yfinance Ticker object for GS
2025-03-16 14:14:01,055 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Attempting to get price from fast_info for GS
2025-03-16 14:14:01,055 - yfinance - DEBUG - Entering history()
2025-03-16 14:14:01,055 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['GS', 1, 0])
2025-03-16 14:14:01,055 - yfinance - DEBUG -  Entering history()
2025-03-16 14:14:01,055 - yfinance - DEBUG - GS: Yahoo GET parameters: {'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-16 14:14:01,055 - yfinance - DEBUG -   Entering get()
2025-03-16 14:14:01,055 - yfinance - DEBUG -    Entering _make_request()
2025-03-16 14:14:01,055 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/GS
2025-03-16 14:14:01,055 - yfinance - DEBUG - params={'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-16 14:14:01,055 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-16 14:14:01,055 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-16 14:14:01,055 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-16 14:14:01,055 - yfinance - DEBUG - reusing cookie
2025-03-16 14:14:01,055 - yfinance - DEBUG - reusing crumb
2025-03-16 14:14:01,055 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-16 14:14:01,055 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-16 14:14:01,156 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/GS?range=1y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=IKqTE59qPrl HTTP/1.1" 200 None
2025-03-16 14:14:01,156 - yfinance - DEBUG - response code=200
2025-03-16 14:14:01,156 - yfinance - DEBUG -    Exiting _make_request()
2025-03-16 14:14:01,156 - yfinance - DEBUG -   Exiting get()
2025-03-16 14:14:01,157 - yfinance - DEBUG - GS: yfinance received OHLC data: 2024-03-15 13:30:00 -> 2025-03-14 13:30:00
2025-03-16 14:14:01,158 - yfinance - DEBUG - GS: OHLC after cleaning: 2024-03-15 09:30:00-04:00 -> 2025-03-14 09:30:00-04:00
2025-03-16 14:14:01,161 - yfinance - DEBUG - GS: OHLC after combining events: 2024-03-15 00:00:00-04:00 -> 2025-03-14 00:00:00-04:00
2025-03-16 14:14:01,161 - yfinance - DEBUG - GS: yfinance returning OHLC: 2024-03-15 00:00:00-04:00 -> 2025-03-14 00:00:00-04:00
2025-03-16 14:14:01,161 - yfinance - DEBUG -  Exiting history()
2025-03-16 14:14:01,161 - yfinance - DEBUG - Exiting history()
2025-03-16 14:14:01,162 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: fast_info price for GS: 541.4099731445312
2025-03-16 14:14:01,162 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Caching price 541.4099731445312 for GS with TTL=300
2025-03-16 14:14:01,164 - app.services.yfinance_provider - DEBUG - Saved data to database cache: yfinance:stock_price:GS
2025-03-16 14:14:01,164 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Returning price 541.4099731445312 for GS
2025-03-16 14:14:01,165 - app.main - INFO - RESPONSE: GET /positions/ - Status: 200 - Time: 0.8123s
2025-03-16 14:14:01,170 - app.main - INFO - REQUEST: GET /positions/? from 127.0.0.1
2025-03-16 14:14:01,171 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:01,171 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: AAPL
2025-03-16 14:14:01,171 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:AAPL
2025-03-16 14:14:01,171 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:AAPL
2025-03-16 14:14:01,172 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:AAPL, returning price: 213.49000549316406
2025-03-16 14:14:01,172 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:01,172 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: AAPL
2025-03-16 14:14:01,172 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:AAPL
2025-03-16 14:14:01,172 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:AAPL
2025-03-16 14:14:01,172 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:AAPL, returning price: 213.49000549316406
2025-03-16 14:14:01,172 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:01,172 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: META
2025-03-16 14:14:01,172 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:META
2025-03-16 14:14:01,172 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:META
2025-03-16 14:14:01,172 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:META, returning price: 607.5999755859375
2025-03-16 14:14:01,172 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:01,173 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: META
2025-03-16 14:14:01,173 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:META
2025-03-16 14:14:01,173 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:META
2025-03-16 14:14:01,173 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:META, returning price: 607.5999755859375
2025-03-16 14:14:01,173 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:01,173 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: IBM
2025-03-16 14:14:01,173 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:IBM
2025-03-16 14:14:01,173 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:IBM
2025-03-16 14:14:01,173 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:IBM, returning price: 248.35000610351562
2025-03-16 14:14:01,173 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:01,173 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: IBM
2025-03-16 14:14:01,173 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:IBM
2025-03-16 14:14:01,173 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:IBM
2025-03-16 14:14:01,174 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:IBM, returning price: 248.35000610351562
2025-03-16 14:14:01,174 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:01,174 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: IBM
2025-03-16 14:14:01,174 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:IBM
2025-03-16 14:14:01,174 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:IBM
2025-03-16 14:14:01,174 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:IBM, returning price: 248.35000610351562
2025-03-16 14:14:01,174 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:01,174 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: GS
2025-03-16 14:14:01,174 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:GS
2025-03-16 14:14:01,174 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:GS
2025-03-16 14:14:01,174 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:GS, returning price: 541.4099731445312
2025-03-16 14:14:01,175 - app.main - INFO - RESPONSE: GET /positions/ - Status: 200 - Time: 0.0051s
2025-03-16 14:14:01,192 - app.main - INFO - REQUEST: GET /greeks/position/81eca42e-b77e-40fd-831f-c1c2c4e5e052?force_recalculate=true from 127.0.0.1
2025-03-16 14:14:01,193 - app.main - INFO - REQUEST: GET /greeks/position/f9afd3d6-c8cb-43d3-bab2-59ab7951e06d?force_recalculate=true from 127.0.0.1
2025-03-16 14:14:01,194 - app.main - INFO - REQUEST: GET /greeks/position/8cd6e002-bd24-4add-808e-f47c3b2a0372?force_recalculate=true from 127.0.0.1
2025-03-16 14:14:01,195 - app.main - INFO - REQUEST: GET /greeks/position/bb7572db-8c48-4ccd-b863-2384ae4e7881?force_recalculate=true from 127.0.0.1
2025-03-16 14:14:01,195 - app.main - INFO - REQUEST: GET /greeks/position/667c1e42-d32e-4664-b482-bb8efe85285f?force_recalculate=true from 127.0.0.1
2025-03-16 14:14:01,195 - app.main - INFO - REQUEST: GET /greeks/position/902a5055-7d42-49af-8705-0249f37da8fc?force_recalculate=true from 127.0.0.1
2025-03-16 14:14:01,196 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:01,197 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:01,197 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:01,197 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:01,197 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:01,198 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:01,200 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: AAPL
2025-03-16 14:14:01,200 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:AAPL
2025-03-16 14:14:01,201 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: AAPL
2025-03-16 14:14:01,201 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: META
2025-03-16 14:14:01,201 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:AAPL
2025-03-16 14:14:01,201 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: IBM
2025-03-16 14:14:01,202 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:AAPL
2025-03-16 14:14:01,202 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:META
2025-03-16 14:14:01,202 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: IBM
2025-03-16 14:14:01,202 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: META
2025-03-16 14:14:01,202 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:IBM
2025-03-16 14:14:01,202 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:AAPL, returning price: 213.49000549316406
2025-03-16 14:14:01,202 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:IBM
2025-03-16 14:14:01,203 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:META
2025-03-16 14:14:01,203 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:AAPL
2025-03-16 14:14:01,203 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:META
2025-03-16 14:14:01,204 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:IBM
2025-03-16 14:14:01,204 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:AAPL, returning price: 213.49000549316406
2025-03-16 14:14:01,204 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:IBM
2025-03-16 14:14:01,204 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:META, returning price: 607.5999755859375
2025-03-16 14:14:01,205 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:META
2025-03-16 14:14:01,205 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:IBM, returning price: 248.35000610351562
2025-03-16 14:14:01,205 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:IBM, returning price: 248.35000610351562
2025-03-16 14:14:01,205 - app.main - INFO - RESPONSE: GET /greeks/position/81eca42e-b77e-40fd-831f-c1c2c4e5e052 - Status: 200 - Time: 0.0129s
2025-03-16 14:14:01,205 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:META, returning price: 607.5999755859375
2025-03-16 14:14:01,207 - app.main - INFO - REQUEST: GET /greeks/position/5332c6dc-4342-4748-9ffc-1087aad16f13?force_recalculate=true from 127.0.0.1
2025-03-16 14:14:01,207 - app.main - INFO - RESPONSE: GET /greeks/position/f9afd3d6-c8cb-43d3-bab2-59ab7951e06d - Status: 200 - Time: 0.0139s
2025-03-16 14:14:01,208 - app.main - INFO - REQUEST: GET /greeks/position/b751c8b9-427b-4a77-bdee-d58a98dbfeca?force_recalculate=true from 127.0.0.1
2025-03-16 14:14:01,208 - app.main - INFO - RESPONSE: GET /greeks/position/8cd6e002-bd24-4add-808e-f47c3b2a0372 - Status: 200 - Time: 0.0136s
2025-03-16 14:14:01,208 - app.main - INFO - RESPONSE: GET /greeks/position/667c1e42-d32e-4664-b482-bb8efe85285f - Status: 200 - Time: 0.0135s
2025-03-16 14:14:01,209 - app.main - INFO - RESPONSE: GET /greeks/position/bb7572db-8c48-4ccd-b863-2384ae4e7881 - Status: 200 - Time: 0.0141s
2025-03-16 14:14:01,209 - app.main - INFO - RESPONSE: GET /greeks/position/902a5055-7d42-49af-8705-0249f37da8fc - Status: 200 - Time: 0.0142s
2025-03-16 14:14:01,210 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:01,210 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:01,211 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: IBM
2025-03-16 14:14:01,211 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:IBM
2025-03-16 14:14:01,211 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:IBM
2025-03-16 14:14:01,211 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: GS
2025-03-16 14:14:01,211 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:GS
2025-03-16 14:14:01,211 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:IBM, returning price: 248.35000610351562
2025-03-16 14:14:01,212 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:GS
2025-03-16 14:14:01,212 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:GS, returning price: 541.4099731445312
2025-03-16 14:14:01,213 - app.main - INFO - RESPONSE: GET /greeks/position/5332c6dc-4342-4748-9ffc-1087aad16f13 - Status: 200 - Time: 0.0057s
2025-03-16 14:14:01,213 - app.main - INFO - RESPONSE: GET /greeks/position/b751c8b9-427b-4a77-bdee-d58a98dbfeca - Status: 200 - Time: 0.0049s
2025-03-16 14:14:15,588 - app.main - INFO - REQUEST: GET /options/search/M?limit=10 from 127.0.0.1
2025-03-16 14:14:15,589 - app.dependencies - DEBUG - Creating new MarketDataService instance
2025-03-16 14:14:15,589 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:15,589 - app.routes.options - INFO - Received ticker search request for query: M, limit: 10
2025-03-16 14:14:15,589 - app.routes.options - INFO - Calling market_data_service.search_tickers with query: M
2025-03-16 14:14:15,590 - app.services.market_data - INFO - MarketDataService.search_tickers called with query: M
2025-03-16 14:14:15,590 - app.services.market_data - INFO - Delegating to provider: YFinanceProvider
2025-03-16 14:14:15,590 - app.services.yfinance_provider - INFO - search_tickers called with query: M
2025-03-16 14:14:15,590 - app.services.yfinance_provider - INFO - Standardized ticker: M
2025-03-16 14:14:15,590 - app.services.yfinance_provider - INFO - Checking cache for key: yfinance:ticker_validation:M
2025-03-16 14:14:15,591 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:ticker_validation:M
2025-03-16 14:14:15,591 - app.services.yfinance_provider - INFO - Cache hit for yfinance:ticker_validation:M: ['M']
2025-03-16 14:14:15,591 - app.services.market_data - INFO - Provider returned results: ['M']
2025-03-16 14:14:15,591 - app.routes.options - INFO - Received results from market_data_service: ['M']
2025-03-16 14:14:15,591 - app.routes.options - INFO - Returning limited results: ['M']
2025-03-16 14:14:15,592 - app.main - INFO - RESPONSE: GET /options/search/M - Status: 200 - Time: 0.0036s
2025-03-16 14:14:15,853 - app.main - INFO - REQUEST: GET /options/search/MA?limit=10 from 127.0.0.1
2025-03-16 14:14:15,854 - app.dependencies - DEBUG - Creating new MarketDataService instance
2025-03-16 14:14:15,854 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:15,854 - app.routes.options - INFO - Received ticker search request for query: MA, limit: 10
2025-03-16 14:14:15,854 - app.routes.options - INFO - Calling market_data_service.search_tickers with query: MA
2025-03-16 14:14:15,854 - app.services.market_data - INFO - MarketDataService.search_tickers called with query: MA
2025-03-16 14:14:15,854 - app.services.market_data - INFO - Delegating to provider: YFinanceProvider
2025-03-16 14:14:15,855 - app.services.yfinance_provider - INFO - search_tickers called with query: MA
2025-03-16 14:14:15,855 - app.services.yfinance_provider - INFO - Standardized ticker: MA
2025-03-16 14:14:15,855 - app.services.yfinance_provider - INFO - Checking cache for key: yfinance:ticker_validation:MA
2025-03-16 14:14:15,856 - app.services.yfinance_provider - INFO - Fetching yfinance data for ticker: MA
2025-03-16 14:14:15,856 - app.services.yfinance_provider - INFO - Getting info for ticker: MA
2025-03-16 14:14:15,856 - yfinance - DEBUG - get_raw_json(): https://query2.finance.yahoo.com/v10/finance/quoteSummary/MA
2025-03-16 14:14:15,856 - yfinance - DEBUG - Entering get()
2025-03-16 14:14:15,856 - yfinance - DEBUG -  Entering _make_request()
2025-03-16 14:14:15,856 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v10/finance/quoteSummary/MA
2025-03-16 14:14:15,856 - yfinance - DEBUG - params={'modules': 'financialData,quoteType,defaultKeyStatistics,assetProfile,summaryDetail', 'corsDomain': 'finance.yahoo.com', 'formatted': 'false', 'symbol': 'MA'}
2025-03-16 14:14:15,856 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-16 14:14:15,856 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-16 14:14:15,856 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-16 14:14:15,856 - yfinance - DEBUG - reusing cookie
2025-03-16 14:14:15,856 - yfinance - DEBUG - reusing crumb
2025-03-16 14:14:15,856 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-16 14:14:15,856 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-16 14:14:15,915 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v10/finance/quoteSummary/MA?modules=financialData%2CquoteType%2CdefaultKeyStatistics%2CassetProfile%2CsummaryDetail&corsDomain=finance.yahoo.com&formatted=false&symbol=MA&crumb=IKqTE59qPrl HTTP/1.1" 200 None
2025-03-16 14:14:15,916 - yfinance - DEBUG - response code=200
2025-03-16 14:14:15,916 - yfinance - DEBUG -  Exiting _make_request()
2025-03-16 14:14:15,916 - yfinance - DEBUG - Exiting get()
2025-03-16 14:14:15,916 - yfinance - DEBUG - get_raw_json(): https://query1.finance.yahoo.com/v7/finance/quote?
2025-03-16 14:14:15,916 - yfinance - DEBUG - Entering get()
2025-03-16 14:14:15,916 - yfinance - DEBUG -  Entering _make_request()
2025-03-16 14:14:15,916 - yfinance - DEBUG - url=https://query1.finance.yahoo.com/v7/finance/quote?
2025-03-16 14:14:15,916 - yfinance - DEBUG - params={'symbols': 'MA', 'formatted': 'false'}
2025-03-16 14:14:15,917 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-16 14:14:15,917 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-16 14:14:15,917 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-16 14:14:15,917 - yfinance - DEBUG - reusing cookie
2025-03-16 14:14:15,917 - yfinance - DEBUG - reusing crumb
2025-03-16 14:14:15,917 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-16 14:14:15,917 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-16 14:14:15,970 - urllib3.connectionpool - DEBUG - https://query1.finance.yahoo.com:443 "GET /v7/finance/quote?symbols=MA&formatted=false&crumb=IKqTE59qPrl HTTP/1.1" 200 1243
2025-03-16 14:14:15,971 - yfinance - DEBUG - response code=200
2025-03-16 14:14:15,971 - yfinance - DEBUG -  Exiting _make_request()
2025-03-16 14:14:15,971 - yfinance - DEBUG - Exiting get()
2025-03-16 14:14:15,979 - yfinance - DEBUG - Entering get()
2025-03-16 14:14:15,979 - yfinance - DEBUG -  Entering _make_request()
2025-03-16 14:14:15,979 - yfinance - DEBUG - url=https://query1.finance.yahoo.com/ws/fundamentals-timeseries/v1/finance/timeseries/MA?symbol=MA&type=trailingPegRatio&period1=1726358400&period2=1742169600
2025-03-16 14:14:15,979 - yfinance - DEBUG - params=None
2025-03-16 14:14:15,979 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-16 14:14:15,979 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-16 14:14:15,979 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-16 14:14:15,979 - yfinance - DEBUG - reusing cookie
2025-03-16 14:14:15,979 - yfinance - DEBUG - reusing crumb
2025-03-16 14:14:15,979 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-16 14:14:15,979 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-16 14:14:16,029 - urllib3.connectionpool - DEBUG - https://query1.finance.yahoo.com:443 "GET /ws/fundamentals-timeseries/v1/finance/timeseries/MA?symbol=MA&type=trailingPegRatio&period1=1726358400&period2=1742169600&crumb=IKqTE59qPrl HTTP/1.1" 200 360
2025-03-16 14:14:16,030 - yfinance - DEBUG - response code=200
2025-03-16 14:14:16,030 - yfinance - DEBUG -  Exiting _make_request()
2025-03-16 14:14:16,030 - yfinance - DEBUG - Exiting get()
2025-03-16 14:14:16,030 - app.services.yfinance_provider - INFO - Got info for ticker MA: True
2025-03-16 14:14:16,030 - app.services.yfinance_provider - INFO - Valid ticker found: MA
2025-03-16 14:14:16,034 - app.services.yfinance_provider - DEBUG - Saved data to database cache: yfinance:ticker_validation:MA
2025-03-16 14:14:16,034 - app.services.market_data - INFO - Provider returned results: ['MA']
2025-03-16 14:14:16,034 - app.routes.options - INFO - Received results from market_data_service: ['MA']
2025-03-16 14:14:16,034 - app.routes.options - INFO - Returning limited results: ['MA']
2025-03-16 14:14:16,035 - app.main - INFO - RESPONSE: GET /options/search/MA - Status: 200 - Time: 0.1819s
2025-03-16 14:14:19,076 - app.main - INFO - REQUEST: GET /options/chains/MA/expirations? from 127.0.0.1
2025-03-16 14:14:19,077 - app.dependencies - DEBUG - Creating new MarketDataService instance
2025-03-16 14:14:19,077 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:19,078 - app.dependencies - DEBUG - Creating new OptionChainService instance with MarketDataService
2025-03-16 14:14:19,078 - app.routes.options - INFO - Getting expirations for ticker: MA
2025-03-16 14:14:19,080 - yfinance - DEBUG - Entering get()
2025-03-16 14:14:19,080 - yfinance - DEBUG -  Entering _make_request()
2025-03-16 14:14:19,080 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/MA
2025-03-16 14:14:19,080 - yfinance - DEBUG - params=None
2025-03-16 14:14:19,080 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-16 14:14:19,080 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-16 14:14:19,080 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-16 14:14:19,080 - yfinance - DEBUG - reusing cookie
2025-03-16 14:14:19,080 - yfinance - DEBUG - reusing crumb
2025-03-16 14:14:19,080 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-16 14:14:19,080 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-16 14:14:19,161 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/MA?crumb=IKqTE59qPrl HTTP/1.1" 200 None
2025-03-16 14:14:19,163 - yfinance - DEBUG - response code=200
2025-03-16 14:14:19,163 - yfinance - DEBUG -  Exiting _make_request()
2025-03-16 14:14:19,163 - yfinance - DEBUG - Exiting get()
2025-03-16 14:14:19,168 - app.services.yfinance_provider - DEBUG - Saved data to database cache: yfinance:option_expirations:MA
2025-03-16 14:14:19,169 - app.routes.options - INFO - Found 16 expirations for MA
2025-03-16 14:14:19,169 - app.routes.options - INFO - Expiration: 2025-03-21 00:00:00, days to expiration: 5
2025-03-16 14:14:19,169 - app.routes.options - INFO - Expiration: 2025-03-28 00:00:00, days to expiration: 12
2025-03-16 14:14:19,169 - app.routes.options - INFO - Expiration: 2025-04-04 00:00:00, days to expiration: 19
2025-03-16 14:14:19,169 - app.routes.options - INFO - Expiration: 2025-04-11 00:00:00, days to expiration: 26
2025-03-16 14:14:19,169 - app.routes.options - INFO - Expiration: 2025-04-17 00:00:00, days to expiration: 32
2025-03-16 14:14:19,169 - app.routes.options - INFO - Expiration: 2025-04-25 00:00:00, days to expiration: 40
2025-03-16 14:14:19,169 - app.routes.options - INFO - Expiration: 2025-05-16 00:00:00, days to expiration: 61
2025-03-16 14:14:19,169 - app.routes.options - INFO - Expiration: 2025-06-20 00:00:00, days to expiration: 96
2025-03-16 14:14:19,169 - app.routes.options - INFO - Expiration: 2025-07-18 00:00:00, days to expiration: 124
2025-03-16 14:14:19,169 - app.routes.options - INFO - Expiration: 2025-09-19 00:00:00, days to expiration: 187
2025-03-16 14:14:19,169 - app.routes.options - INFO - Expiration: 2025-10-17 00:00:00, days to expiration: 215
2025-03-16 14:14:19,169 - app.routes.options - INFO - Expiration: 2026-01-16 00:00:00, days to expiration: 306
2025-03-16 14:14:19,169 - app.routes.options - INFO - Expiration: 2026-03-20 00:00:00, days to expiration: 369
2025-03-16 14:14:19,170 - app.routes.options - INFO - Expiration: 2026-06-18 00:00:00, days to expiration: 459
2025-03-16 14:14:19,170 - app.routes.options - INFO - Expiration: 2026-12-18 00:00:00, days to expiration: 642
2025-03-16 14:14:19,170 - app.routes.options - INFO - Expiration: 2027-01-15 00:00:00, days to expiration: 670
2025-03-16 14:14:19,170 - app.main - INFO - RESPONSE: GET /options/chains/MA/expirations - Status: 200 - Time: 0.0934s
2025-03-16 14:14:19,175 - app.main - INFO - REQUEST: GET /options/chains/MA/2025-03-21? from 127.0.0.1
2025-03-16 14:14:19,176 - app.dependencies - DEBUG - Creating new MarketDataService instance
2025-03-16 14:14:19,176 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:19,176 - app.dependencies - DEBUG - Creating new OptionChainService instance with MarketDataService
2025-03-16 14:14:19,176 - app.routes.options - INFO - Getting options for ticker: MA, expiration: 2025-03-21, type: None
2025-03-16 14:14:19,176 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_option_chain called for ticker: MA, expiration: 2025-03-21 00:00:00
2025-03-16 14:14:19,176 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Cache key: yfinance:option_chain:MA:2025-03-21 00:00:00
2025-03-16 14:14:19,176 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking for cached data with key: yfinance:option_chain:MA:2025-03-21 00:00:00
2025-03-16 14:14:19,177 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Creating yfinance Ticker object for MA
2025-03-16 14:14:19,177 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Fetching available expirations for MA
2025-03-16 14:14:19,177 - yfinance - DEBUG - Entering get()
2025-03-16 14:14:19,177 - yfinance - DEBUG -  Entering _make_request()
2025-03-16 14:14:19,177 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/MA
2025-03-16 14:14:19,177 - yfinance - DEBUG - params=None
2025-03-16 14:14:19,177 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-16 14:14:19,177 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-16 14:14:19,177 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-16 14:14:19,177 - yfinance - DEBUG - reusing cookie
2025-03-16 14:14:19,177 - yfinance - DEBUG - reusing crumb
2025-03-16 14:14:19,177 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-16 14:14:19,177 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-16 14:14:19,197 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/MA?crumb=IKqTE59qPrl HTTP/1.1" 200 7548
2025-03-16 14:14:19,198 - yfinance - DEBUG - response code=200
2025-03-16 14:14:19,198 - yfinance - DEBUG -  Exiting _make_request()
2025-03-16 14:14:19,198 - yfinance - DEBUG - Exiting get()
2025-03-16 14:14:19,200 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Found 16 expirations for MA
2025-03-16 14:14:19,200 - yfinance - DEBUG - Entering get()
2025-03-16 14:14:19,200 - yfinance - DEBUG -  Entering _make_request()
2025-03-16 14:14:19,200 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/MA?date=1742515200
2025-03-16 14:14:19,200 - yfinance - DEBUG - params=None
2025-03-16 14:14:19,200 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-16 14:14:19,200 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-16 14:14:19,200 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-16 14:14:19,200 - yfinance - DEBUG - reusing cookie
2025-03-16 14:14:19,200 - yfinance - DEBUG - reusing crumb
2025-03-16 14:14:19,200 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-16 14:14:19,200 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-16 14:14:19,365 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/MA?date=1742515200&crumb=IKqTE59qPrl HTTP/1.1" 200 None
2025-03-16 14:14:19,367 - yfinance - DEBUG - response code=200
2025-03-16 14:14:19,367 - yfinance - DEBUG -  Exiting _make_request()
2025-03-16 14:14:19,367 - yfinance - DEBUG - Exiting get()
2025-03-16 14:14:19,377 - app.services.yfinance_provider - INFO - Sample option data structure: {'contractSymbol': 'MA250321C00300000', 'lastTradeDate': 1741881705000, 'strike': 300.0, 'lastPrice': 222.7, 'bid': 225.85, 'ask': 230.3, 'change': 0.0, 'percentChange': 0.0, 'volume': 3.0, 'openInterest': 1, 'impliedVolatility': 1.9658204834, 'inTheMoney': True, 'contractSize': 'REGULAR', 'currency': 'USD', 'optionType': 'call', 'underlying': 'MA', 'expiration_date': '2025-03-21'}
2025-03-16 14:14:19,377 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Getting underlying price for MA before processing options
2025-03-16 14:14:19,377 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: MA
2025-03-16 14:14:19,377 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:MA
2025-03-16 14:14:19,377 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache miss, fetching stock price for ticker: MA
2025-03-16 14:14:19,377 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Creating yfinance Ticker object for MA
2025-03-16 14:14:19,377 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Attempting to get price from fast_info for MA
2025-03-16 14:14:19,378 - yfinance - DEBUG - Entering history()
2025-03-16 14:14:19,378 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['MA', 1, 0])
2025-03-16 14:14:19,378 - yfinance - DEBUG -  Entering history()
2025-03-16 14:14:19,378 - yfinance - DEBUG - MA: Yahoo GET parameters: {'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-16 14:14:19,378 - yfinance - DEBUG -   Entering get()
2025-03-16 14:14:19,378 - yfinance - DEBUG -    Entering _make_request()
2025-03-16 14:14:19,378 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/MA
2025-03-16 14:14:19,378 - yfinance - DEBUG - params={'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-16 14:14:19,378 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-16 14:14:19,378 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-16 14:14:19,378 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-16 14:14:19,378 - yfinance - DEBUG - reusing cookie
2025-03-16 14:14:19,378 - yfinance - DEBUG - reusing crumb
2025-03-16 14:14:19,378 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-16 14:14:19,378 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-16 14:14:19,482 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/MA?range=1y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=IKqTE59qPrl HTTP/1.1" 200 None
2025-03-16 14:14:19,484 - yfinance - DEBUG - response code=200
2025-03-16 14:14:19,484 - yfinance - DEBUG -    Exiting _make_request()
2025-03-16 14:14:19,484 - yfinance - DEBUG -   Exiting get()
2025-03-16 14:14:19,486 - yfinance - DEBUG - MA: yfinance received OHLC data: 2024-03-15 13:30:00 -> 2025-03-14 13:30:00
2025-03-16 14:14:19,488 - yfinance - DEBUG - MA: OHLC after cleaning: 2024-03-15 09:30:00-04:00 -> 2025-03-14 09:30:00-04:00
2025-03-16 14:14:19,492 - yfinance - DEBUG - MA: OHLC after combining events: 2024-03-15 00:00:00-04:00 -> 2025-03-14 00:00:00-04:00
2025-03-16 14:14:19,492 - yfinance - DEBUG - MA: yfinance returning OHLC: 2024-03-15 00:00:00-04:00 -> 2025-03-14 00:00:00-04:00
2025-03-16 14:14:19,492 - yfinance - DEBUG -  Exiting history()
2025-03-16 14:14:19,492 - yfinance - DEBUG - Exiting history()
2025-03-16 14:14:19,493 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: fast_info price for MA: 527.6400146484375
2025-03-16 14:14:19,493 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Caching price 527.6400146484375 for MA with TTL=300
2025-03-16 14:14:19,495 - app.services.yfinance_provider - DEBUG - Saved data to database cache: yfinance:stock_price:MA
2025-03-16 14:14:19,495 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Returning price 527.6400146484375 for MA
2025-03-16 14:14:19,495 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Retrieved underlying price for MA: 527.6400146484375
2025-03-16 14:14:19,495 - app.services.yfinance_provider - DEBUG - Sample option keys: dict_keys(['contractSymbol', 'lastTradeDate', 'strike', 'lastPrice', 'bid', 'ask', 'change', 'percentChange', 'volume', 'openInterest', 'impliedVolatility', 'inTheMoney', 'contractSize', 'currency', 'optionType', 'underlying', 'expiration_date'])
2025-03-16 14:14:19,495 - app.services.yfinance_provider - DEBUG - Sample standardized option: {'ticker': 'MA', 'expiration': '2025-03-21T00:00:00', 'strike': 300.0, 'option_type': 'call', 'bid': 225.85, 'ask': 230.3, 'last': 222.7, 'volume': 3, 'open_interest': 1, 'implied_volatility': 1.9658204834, 'delta': None, 'gamma': None, 'theta': None, 'vega': None, 'rho': None, 'in_the_money': True, 'underlying_price': 527.6400146484375}
2025-03-16 14:14:19,497 - app.services.yfinance_provider - DEBUG - Saved data to database cache: yfinance:option_chain:MA:2025-03-21 00:00:00
2025-03-16 14:14:19,498 - app.routes.options - INFO - Found 137 options for MA expiring on 2025-03-21
2025-03-16 14:14:19,498 - app.routes.options - INFO - Returning 137 options after filtering
2025-03-16 14:14:19,499 - app.main - INFO - RESPONSE: GET /options/chains/MA/2025-03-21 - Status: 200 - Time: 0.3235s
2025-03-16 14:14:22,721 - app.main - INFO - REQUEST: GET /options/chains/MA/2025-04-11? from 127.0.0.1
2025-03-16 14:14:22,722 - app.dependencies - DEBUG - Creating new MarketDataService instance
2025-03-16 14:14:22,722 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:22,722 - app.dependencies - DEBUG - Creating new OptionChainService instance with MarketDataService
2025-03-16 14:14:22,723 - app.routes.options - INFO - Getting options for ticker: MA, expiration: 2025-04-11, type: None
2025-03-16 14:14:22,723 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_option_chain called for ticker: MA, expiration: 2025-04-11 00:00:00
2025-03-16 14:14:22,723 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Cache key: yfinance:option_chain:MA:2025-04-11 00:00:00
2025-03-16 14:14:22,723 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking for cached data with key: yfinance:option_chain:MA:2025-04-11 00:00:00
2025-03-16 14:14:22,725 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Creating yfinance Ticker object for MA
2025-03-16 14:14:22,725 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Fetching available expirations for MA
2025-03-16 14:14:22,725 - yfinance - DEBUG - Entering get()
2025-03-16 14:14:22,725 - yfinance - DEBUG -  Entering _make_request()
2025-03-16 14:14:22,725 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/MA
2025-03-16 14:14:22,725 - yfinance - DEBUG - params=None
2025-03-16 14:14:22,725 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-16 14:14:22,725 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-16 14:14:22,725 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-16 14:14:22,725 - yfinance - DEBUG - reusing cookie
2025-03-16 14:14:22,725 - yfinance - DEBUG - reusing crumb
2025-03-16 14:14:22,725 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-16 14:14:22,725 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-16 14:14:22,806 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/MA?crumb=IKqTE59qPrl HTTP/1.1" 200 None
2025-03-16 14:14:22,807 - yfinance - DEBUG - response code=200
2025-03-16 14:14:22,807 - yfinance - DEBUG -  Exiting _make_request()
2025-03-16 14:14:22,807 - yfinance - DEBUG - Exiting get()
2025-03-16 14:14:22,808 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Found 16 expirations for MA
2025-03-16 14:14:22,808 - yfinance - DEBUG - Entering get()
2025-03-16 14:14:22,809 - yfinance - DEBUG -  Entering _make_request()
2025-03-16 14:14:22,809 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v7/finance/options/MA?date=1744329600
2025-03-16 14:14:22,809 - yfinance - DEBUG - params=None
2025-03-16 14:14:22,809 - yfinance - DEBUG -   Entering _get_cookie_and_crumb()
2025-03-16 14:14:22,809 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-16 14:14:22,809 - yfinance - DEBUG -    Entering _get_cookie_and_crumb_basic()
2025-03-16 14:14:22,809 - yfinance - DEBUG - reusing cookie
2025-03-16 14:14:22,809 - yfinance - DEBUG - reusing crumb
2025-03-16 14:14:22,809 - yfinance - DEBUG -    Exiting _get_cookie_and_crumb_basic()
2025-03-16 14:14:22,809 - yfinance - DEBUG -   Exiting _get_cookie_and_crumb()
2025-03-16 14:14:22,877 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v7/finance/options/MA?date=1744329600&crumb=IKqTE59qPrl HTTP/1.1" 200 None
2025-03-16 14:14:22,878 - yfinance - DEBUG - response code=200
2025-03-16 14:14:22,878 - yfinance - DEBUG -  Exiting _make_request()
2025-03-16 14:14:22,878 - yfinance - DEBUG - Exiting get()
2025-03-16 14:14:22,885 - app.services.yfinance_provider - INFO - Sample option data structure: {'contractSymbol': 'MA250411C00460000', 'lastTradeDate': 1741014046000, 'strike': 460.0, 'lastPrice': 119.0, 'bid': 68.4, 'ask': 72.1, 'change': 0.0, 'percentChange': 0.0, 'volume': None, 'openInterest': 5, 'impliedVolatility': 0.4669242761, 'inTheMoney': True, 'contractSize': 'REGULAR', 'currency': 'USD', 'optionType': 'call', 'underlying': 'MA', 'expiration_date': '2025-04-11'}
2025-03-16 14:14:22,886 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Getting underlying price for MA before processing options
2025-03-16 14:14:22,886 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: MA
2025-03-16 14:14:22,886 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:MA
2025-03-16 14:14:22,887 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:MA
2025-03-16 14:14:22,887 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:MA, returning price: 527.6400146484375
2025-03-16 14:14:22,887 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Retrieved underlying price for MA: 527.6400146484375
2025-03-16 14:14:22,887 - app.services.yfinance_provider - DEBUG - Sample option keys: dict_keys(['contractSymbol', 'lastTradeDate', 'strike', 'lastPrice', 'bid', 'ask', 'change', 'percentChange', 'volume', 'openInterest', 'impliedVolatility', 'inTheMoney', 'contractSize', 'currency', 'optionType', 'underlying', 'expiration_date'])
2025-03-16 14:14:22,887 - app.services.yfinance_provider - DEBUG - Sample standardized option: {'ticker': 'MA', 'expiration': '2025-04-11T00:00:00', 'strike': 460.0, 'option_type': 'call', 'bid': 68.4, 'ask': 72.1, 'last': 119.0, 'volume': None, 'open_interest': 5, 'implied_volatility': 0.4669242761, 'delta': None, 'gamma': None, 'theta': None, 'vega': None, 'rho': None, 'in_the_money': True, 'underlying_price': 527.6400146484375}
2025-03-16 14:14:22,890 - app.services.yfinance_provider - DEBUG - Saved data to database cache: yfinance:option_chain:MA:2025-04-11 00:00:00
2025-03-16 14:14:22,890 - app.routes.options - INFO - Found 28 options for MA expiring on 2025-04-11
2025-03-16 14:14:22,890 - app.routes.options - INFO - Returning 28 options after filtering
2025-03-16 14:14:22,891 - app.main - INFO - RESPONSE: GET /options/chains/MA/2025-04-11 - Status: 200 - Time: 0.1698s
2025-03-16 14:14:25,213 - app.main - INFO - REQUEST: OPTIONS /debug/log? from 127.0.0.1
2025-03-16 14:14:25,213 - app.main - INFO - RESPONSE: OPTIONS /debug/log - Status: 200 - Time: 0.0006s
2025-03-16 14:14:25,216 - app.main - INFO - REQUEST: POST /debug/log? from 127.0.0.1
2025-03-16 14:14:25,219 - app.main - INFO - RESPONSE: POST /debug/log - Status: 200 - Time: 0.0030s
2025-03-16 14:14:45,889 - app.main - INFO - REQUEST: OPTIONS /positions/? from 127.0.0.1
2025-03-16 14:14:45,890 - app.main - INFO - RESPONSE: OPTIONS /positions/ - Status: 200 - Time: 0.0002s
2025-03-16 14:14:45,892 - app.main - INFO - REQUEST: POST /positions/? from 127.0.0.1
2025-03-16 14:14:45,903 - app.main - INFO - RESPONSE: POST /positions/ - Status: 200 - Time: 0.0110s
2025-03-16 14:14:45,905 - app.main - INFO - REQUEST: OPTIONS /greeks/calculate? from 127.0.0.1
2025-03-16 14:14:45,905 - app.main - INFO - RESPONSE: OPTIONS /greeks/calculate - Status: 200 - Time: 0.0002s
2025-03-16 14:14:45,906 - app.main - INFO - REQUEST: POST /greeks/calculate? from 127.0.0.1
2025-03-16 14:14:45,907 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:45,909 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: MA
2025-03-16 14:14:45,909 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:MA
2025-03-16 14:14:45,909 - app.main - INFO - REQUEST: GET /positions/? from 127.0.0.1
2025-03-16 14:14:45,910 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:MA
2025-03-16 14:14:45,910 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:MA, returning price: 527.6400146484375
2025-03-16 14:14:45,912 - app.main - INFO - RESPONSE: POST /greeks/calculate - Status: 200 - Time: 0.0055s
2025-03-16 14:14:45,912 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:45,912 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: AAPL
2025-03-16 14:14:45,912 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:AAPL
2025-03-16 14:14:45,913 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:AAPL
2025-03-16 14:14:45,913 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:AAPL, returning price: 213.49000549316406
2025-03-16 14:14:45,913 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:45,913 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: AAPL
2025-03-16 14:14:45,913 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:AAPL
2025-03-16 14:14:45,913 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:AAPL
2025-03-16 14:14:45,913 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:AAPL, returning price: 213.49000549316406
2025-03-16 14:14:45,913 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:45,913 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: META
2025-03-16 14:14:45,914 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:META
2025-03-16 14:14:45,914 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:META
2025-03-16 14:14:45,914 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:META, returning price: 607.5999755859375
2025-03-16 14:14:45,914 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:45,914 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: META
2025-03-16 14:14:45,914 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:META
2025-03-16 14:14:45,915 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:META
2025-03-16 14:14:45,915 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:META, returning price: 607.5999755859375
2025-03-16 14:14:45,915 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:45,915 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: IBM
2025-03-16 14:14:45,915 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:IBM
2025-03-16 14:14:45,915 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:IBM
2025-03-16 14:14:45,915 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:IBM, returning price: 248.35000610351562
2025-03-16 14:14:45,915 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:45,915 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: IBM
2025-03-16 14:14:45,915 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:IBM
2025-03-16 14:14:45,915 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:IBM
2025-03-16 14:14:45,915 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:IBM, returning price: 248.35000610351562
2025-03-16 14:14:45,916 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:45,916 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: IBM
2025-03-16 14:14:45,916 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:IBM
2025-03-16 14:14:45,916 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:IBM
2025-03-16 14:14:45,916 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:IBM, returning price: 248.35000610351562
2025-03-16 14:14:45,916 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:45,916 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: GS
2025-03-16 14:14:45,916 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:GS
2025-03-16 14:14:45,917 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:GS
2025-03-16 14:14:45,917 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:GS, returning price: 541.4099731445312
2025-03-16 14:14:45,917 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:45,917 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: MA
2025-03-16 14:14:45,917 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:MA
2025-03-16 14:14:45,917 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:MA
2025-03-16 14:14:45,917 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:MA, returning price: 527.6400146484375
2025-03-16 14:14:45,918 - app.main - INFO - RESPONSE: GET /positions/ - Status: 200 - Time: 0.0078s
2025-03-16 14:14:45,921 - app.main - INFO - REQUEST: GET /greeks/position/81eca42e-b77e-40fd-831f-c1c2c4e5e052?force_recalculate=true from 127.0.0.1
2025-03-16 14:14:45,922 - app.main - INFO - REQUEST: GET /greeks/position/f9afd3d6-c8cb-43d3-bab2-59ab7951e06d?force_recalculate=true from 127.0.0.1
2025-03-16 14:14:45,922 - app.main - INFO - REQUEST: GET /greeks/position/8cd6e002-bd24-4add-808e-f47c3b2a0372?force_recalculate=true from 127.0.0.1
2025-03-16 14:14:45,923 - app.main - INFO - REQUEST: GET /greeks/position/bb7572db-8c48-4ccd-b863-2384ae4e7881?force_recalculate=true from 127.0.0.1
2025-03-16 14:14:45,923 - app.main - INFO - REQUEST: GET /greeks/position/667c1e42-d32e-4664-b482-bb8efe85285f?force_recalculate=true from 127.0.0.1
2025-03-16 14:14:45,923 - app.main - INFO - REQUEST: GET /greeks/position/902a5055-7d42-49af-8705-0249f37da8fc?force_recalculate=true from 127.0.0.1
2025-03-16 14:14:45,924 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:45,924 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:45,925 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:45,925 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:45,925 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:45,925 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:45,926 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: AAPL
2025-03-16 14:14:45,927 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:AAPL
2025-03-16 14:14:45,926 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: AAPL
2025-03-16 14:14:45,927 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: META
2025-03-16 14:14:45,927 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:AAPL
2025-03-16 14:14:45,927 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:META
2025-03-16 14:14:45,928 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:AAPL
2025-03-16 14:14:45,928 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: IBM
2025-03-16 14:14:45,929 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:IBM
2025-03-16 14:14:45,928 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: META
2025-03-16 14:14:45,929 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:META
2025-03-16 14:14:45,929 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:AAPL
2025-03-16 14:14:45,929 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:AAPL, returning price: 213.49000549316406
2025-03-16 14:14:45,929 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: IBM
2025-03-16 14:14:45,930 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:AAPL, returning price: 213.49000549316406
2025-03-16 14:14:45,930 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:META
2025-03-16 14:14:45,930 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:META
2025-03-16 14:14:45,930 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:IBM
2025-03-16 14:14:45,930 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:IBM
2025-03-16 14:14:45,930 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:META, returning price: 607.5999755859375
2025-03-16 14:14:45,930 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:META, returning price: 607.5999755859375
2025-03-16 14:14:45,931 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:IBM, returning price: 248.35000610351562
2025-03-16 14:14:45,931 - app.main - INFO - RESPONSE: GET /greeks/position/f9afd3d6-c8cb-43d3-bab2-59ab7951e06d - Status: 200 - Time: 0.0095s
2025-03-16 14:14:45,931 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:IBM
2025-03-16 14:14:45,932 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:IBM, returning price: 248.35000610351562
2025-03-16 14:14:45,932 - app.main - INFO - RESPONSE: GET /greeks/position/81eca42e-b77e-40fd-831f-c1c2c4e5e052 - Status: 200 - Time: 0.0114s
2025-03-16 14:14:45,933 - app.main - INFO - REQUEST: GET /greeks/position/5332c6dc-4342-4748-9ffc-1087aad16f13?force_recalculate=true from 127.0.0.1
2025-03-16 14:14:45,934 - app.main - INFO - REQUEST: GET /greeks/position/b751c8b9-427b-4a77-bdee-d58a98dbfeca?force_recalculate=true from 127.0.0.1
2025-03-16 14:14:45,934 - app.main - INFO - RESPONSE: GET /greeks/position/8cd6e002-bd24-4add-808e-f47c3b2a0372 - Status: 200 - Time: 0.0117s
2025-03-16 14:14:45,935 - app.main - INFO - RESPONSE: GET /greeks/position/902a5055-7d42-49af-8705-0249f37da8fc - Status: 200 - Time: 0.0112s
2025-03-16 14:14:45,935 - app.main - INFO - RESPONSE: GET /greeks/position/bb7572db-8c48-4ccd-b863-2384ae4e7881 - Status: 200 - Time: 0.0124s
2025-03-16 14:14:45,935 - app.main - INFO - RESPONSE: GET /greeks/position/667c1e42-d32e-4664-b482-bb8efe85285f - Status: 200 - Time: 0.0120s
2025-03-16 14:14:45,936 - app.main - INFO - REQUEST: GET /greeks/position/1b2f75d1-b266-4aca-bfae-e505f35599c4?force_recalculate=true from 127.0.0.1
2025-03-16 14:14:45,936 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:45,936 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:45,937 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-16 14:14:45,937 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: GS
2025-03-16 14:14:45,937 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:GS
2025-03-16 14:14:45,937 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: IBM
2025-03-16 14:14:45,938 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:IBM
2025-03-16 14:14:45,938 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:GS
2025-03-16 14:14:45,938 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: MA
2025-03-16 14:14:45,938 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:GS, returning price: 541.4099731445312
2025-03-16 14:14:45,938 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:MA
2025-03-16 14:14:45,939 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:IBM
2025-03-16 14:14:45,939 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:IBM, returning price: 248.35000610351562
2025-03-16 14:14:45,939 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:MA
2025-03-16 14:14:45,939 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:MA, returning price: 527.6400146484375
2025-03-16 14:14:45,940 - app.main - INFO - RESPONSE: GET /greeks/position/b751c8b9-427b-4a77-bdee-d58a98dbfeca - Status: 200 - Time: 0.0063s
2025-03-16 14:14:45,940 - app.main - INFO - RESPONSE: GET /greeks/position/5332c6dc-4342-4748-9ffc-1087aad16f13 - Status: 200 - Time: 0.0072s
2025-03-16 14:14:45,941 - app.main - INFO - RESPONSE: GET /greeks/position/1b2f75d1-b266-4aca-bfae-e505f35599c4 - Status: 200 - Time: 0.0052s
