2025-03-10 01:09:01,039 - app.main - INFO - Backend logging initialized. Log file: /Volumes/bdrive/repos/optionstrat/src/backend/logs/backend.log
2025-03-10 01:09:10,390 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-10 01:09:10,390 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: AAPL
2025-03-10 01:09:10,390 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:AAPL
2025-03-10 01:09:10,393 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache miss, fetching stock price for ticker: AAPL
2025-03-10 01:09:10,393 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Creating yfinance Ticker object for AAPL
2025-03-10 01:09:10,393 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Attempting to get price from fast_info for AAPL
2025-03-10 01:09:10,393 - yfinance - DEBUG - Entering history()
2025-03-10 01:09:10,394 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_kv" ("key" VARCHAR(255) NOT NULL PRIMARY KEY, "value" VARCHAR(255)) WITHOUT ROWID', [])
2025-03-10 01:09:10,394 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['AAPL', 1, 0])
2025-03-10 01:09:10,408 - yfinance - DEBUG -  Entering history()
2025-03-10 01:09:10,408 - yfinance - DEBUG - AAPL: Yahoo GET parameters: {'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-10 01:09:10,408 - yfinance - DEBUG -   Entering get()
2025-03-10 01:09:10,408 - yfinance - DEBUG -    Entering _make_request()
2025-03-10 01:09:10,408 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/AAPL
2025-03-10 01:09:10,408 - yfinance - DEBUG - params={'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-10 01:09:10,408 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-10 01:09:10,408 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-10 01:09:10,408 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-10 01:09:10,408 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_cookieschema" ("strategy" VARCHAR(255) NOT NULL PRIMARY KEY, "fetch_date" DATETIME NOT NULL, "cookie_bytes" BLOB NOT NULL) WITHOUT ROWID', [])
2025-03-10 01:09:10,409 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['basic', 1, 0])
2025-03-10 01:09:10,409 - yfinance - DEBUG - loaded persistent cookie
2025-03-10 01:09:10,409 - yfinance - DEBUG - reusing cookie
2025-03-10 01:09:10,413 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query1.finance.yahoo.com:443
2025-03-10 01:09:10,517 - urllib3.connectionpool - DEBUG - https://query1.finance.yahoo.com:443 "GET /v1/test/getcrumb HTTP/1.1" 200 11
2025-03-10 01:09:10,518 - yfinance - DEBUG - crumb = 'QiHoP2Jnm1Y'
2025-03-10 01:09:10,518 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-10 01:09:10,518 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-10 01:09:10,519 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): query2.finance.yahoo.com:443
2025-03-10 01:09:10,681 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/AAPL?range=1y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=QiHoP2Jnm1Y HTTP/1.1" 200 None
2025-03-10 01:09:10,682 - yfinance - DEBUG - response code=200
2025-03-10 01:09:10,682 - yfinance - DEBUG -    Exiting _make_request()
2025-03-10 01:09:10,682 - yfinance - DEBUG -   Exiting get()
2025-03-10 01:09:10,684 - yfinance - DEBUG - AAPL: yfinance received OHLC data: 2024-03-08 14:30:00 -> 2025-03-07 14:30:00
2025-03-10 01:09:10,687 - yfinance - DEBUG - AAPL: OHLC after cleaning: 2024-03-08 09:30:00-05:00 -> 2025-03-07 09:30:00-05:00
2025-03-10 01:09:10,692 - yfinance - DEBUG - AAPL: OHLC after combining events: 2024-03-08 00:00:00-05:00 -> 2025-03-07 00:00:00-05:00
2025-03-10 01:09:10,692 - yfinance - DEBUG - AAPL: yfinance returning OHLC: 2024-03-08 00:00:00-05:00 -> 2025-03-07 00:00:00-05:00
2025-03-10 01:09:10,693 - yfinance - DEBUG -  Exiting history()
2025-03-10 01:09:10,693 - yfinance - DEBUG - Exiting history()
2025-03-10 01:09:10,694 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: fast_info price for AAPL: 239.07000732421875
2025-03-10 01:09:10,694 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Caching price 239.07000732421875 for AAPL with TTL=300
2025-03-10 01:09:10,698 - app.services.yfinance_provider - DEBUG - Saved data to database cache: yfinance:stock_price:AAPL
2025-03-10 01:09:10,698 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Returning price 239.07000732421875 for AAPL
2025-03-10 01:09:10,698 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-10 01:09:10,698 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: AAPL
2025-03-10 01:09:10,698 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:AAPL
2025-03-10 01:09:10,699 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:AAPL
2025-03-10 01:09:10,699 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:AAPL, returning price: 239.07000732421875
2025-03-10 01:09:10,699 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-10 01:09:10,699 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: META
2025-03-10 01:09:10,699 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:META
2025-03-10 01:09:10,702 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache miss, fetching stock price for ticker: META
2025-03-10 01:09:10,702 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Creating yfinance Ticker object for META
2025-03-10 01:09:10,702 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Attempting to get price from fast_info for META
2025-03-10 01:09:10,702 - yfinance - DEBUG - Entering history()
2025-03-10 01:09:10,702 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['META', 1, 0])
2025-03-10 01:09:10,702 - yfinance - DEBUG -  Entering history()
2025-03-10 01:09:10,702 - yfinance - DEBUG - META: Yahoo GET parameters: {'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-10 01:09:10,702 - yfinance - DEBUG -   Entering get()
2025-03-10 01:09:10,702 - yfinance - DEBUG -    Entering _make_request()
2025-03-10 01:09:10,702 - yfinance - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/META
2025-03-10 01:09:10,702 - yfinance - DEBUG - params={'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2025-03-10 01:09:10,702 - yfinance - DEBUG -     Entering _get_cookie_and_crumb()
2025-03-10 01:09:10,702 - yfinance - DEBUG - cookie_mode = 'basic'
2025-03-10 01:09:10,702 - yfinance - DEBUG -      Entering _get_cookie_and_crumb_basic()
2025-03-10 01:09:10,702 - yfinance - DEBUG - reusing cookie
2025-03-10 01:09:10,702 - yfinance - DEBUG - reusing crumb
2025-03-10 01:09:10,702 - yfinance - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2025-03-10 01:09:10,702 - yfinance - DEBUG -     Exiting _get_cookie_and_crumb()
2025-03-10 01:09:10,763 - urllib3.connectionpool - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/META?range=1y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=QiHoP2Jnm1Y HTTP/1.1" 200 None
2025-03-10 01:09:10,763 - yfinance - DEBUG - response code=200
2025-03-10 01:09:10,763 - yfinance - DEBUG -    Exiting _make_request()
2025-03-10 01:09:10,763 - yfinance - DEBUG -   Exiting get()
2025-03-10 01:09:10,764 - yfinance - DEBUG - META: yfinance received OHLC data: 2024-03-08 14:30:00 -> 2025-03-07 14:30:00
2025-03-10 01:09:10,764 - yfinance - DEBUG - META: OHLC after cleaning: 2024-03-08 09:30:00-05:00 -> 2025-03-07 09:30:00-05:00
2025-03-10 01:09:10,767 - yfinance - DEBUG - META: OHLC after combining events: 2024-03-08 00:00:00-05:00 -> 2025-03-07 00:00:00-05:00
2025-03-10 01:09:10,767 - yfinance - DEBUG - META: yfinance returning OHLC: 2024-03-08 00:00:00-05:00 -> 2025-03-07 00:00:00-05:00
2025-03-10 01:09:10,767 - yfinance - DEBUG -  Exiting history()
2025-03-10 01:09:10,767 - yfinance - DEBUG - Exiting history()
2025-03-10 01:09:10,768 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: fast_info price for META: 625.6599731445312
2025-03-10 01:09:10,768 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Caching price 625.6599731445312 for META with TTL=300
2025-03-10 01:09:10,770 - app.services.yfinance_provider - DEBUG - Saved data to database cache: yfinance:stock_price:META
2025-03-10 01:09:10,770 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Returning price 625.6599731445312 for META
2025-03-10 01:09:10,770 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-10 01:09:10,770 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: META
2025-03-10 01:09:10,770 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:META
2025-03-10 01:09:10,771 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:META
2025-03-10 01:09:10,771 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:META, returning price: 625.6599731445312
2025-03-10 01:09:17,083 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-10 01:09:17,084 - app.routes.options - INFO - Received ticker search request for query: AAPL, limit: 10
2025-03-10 01:09:17,084 - app.routes.options - INFO - Calling market_data_service.search_tickers with query: AAPL
2025-03-10 01:09:17,084 - app.services.market_data - INFO - MarketDataService.search_tickers called with query: AAPL
2025-03-10 01:09:17,084 - app.services.market_data - INFO - Delegating to provider: YFinanceProvider
2025-03-10 01:09:17,084 - app.services.yfinance_provider - INFO - search_tickers called with query: AAPL
2025-03-10 01:09:17,084 - app.services.yfinance_provider - INFO - Standardized ticker: AAPL
2025-03-10 01:09:17,084 - app.services.yfinance_provider - INFO - Checking cache for key: yfinance:ticker_validation:AAPL
2025-03-10 01:09:17,086 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:ticker_validation:AAPL
2025-03-10 01:09:17,086 - app.services.yfinance_provider - INFO - Cache hit for yfinance:ticker_validation:AAPL: ['AAPL']
2025-03-10 01:09:17,086 - app.services.market_data - INFO - Provider returned results: ['AAPL']
2025-03-10 01:09:17,086 - app.routes.options - INFO - Received results from market_data_service: ['AAPL']
2025-03-10 01:09:17,086 - app.routes.options - INFO - Returning limited results: ['AAPL']
2025-03-10 01:09:18,590 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-10 01:09:18,591 - app.routes.options - INFO - Received ticker search request for query: AAPL, limit: 10
2025-03-10 01:09:18,591 - app.routes.options - INFO - Calling market_data_service.search_tickers with query: AAPL
2025-03-10 01:09:18,591 - app.services.market_data - INFO - MarketDataService.search_tickers called with query: AAPL
2025-03-10 01:09:18,591 - app.services.market_data - INFO - Delegating to provider: YFinanceProvider
2025-03-10 01:09:18,591 - app.services.yfinance_provider - INFO - search_tickers called with query: AAPL
2025-03-10 01:09:18,591 - app.services.yfinance_provider - INFO - Standardized ticker: AAPL
2025-03-10 01:09:18,591 - app.services.yfinance_provider - INFO - Checking cache for key: yfinance:ticker_validation:AAPL
2025-03-10 01:09:18,593 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:ticker_validation:AAPL
2025-03-10 01:09:18,593 - app.services.yfinance_provider - INFO - Cache hit for yfinance:ticker_validation:AAPL: ['AAPL']
2025-03-10 01:09:18,593 - app.services.market_data - INFO - Provider returned results: ['AAPL']
2025-03-10 01:09:18,593 - app.routes.options - INFO - Received results from market_data_service: ['AAPL']
2025-03-10 01:09:18,593 - app.routes.options - INFO - Returning limited results: ['AAPL']
2025-03-10 01:09:20,232 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-10 01:09:20,233 - app.routes.options - INFO - Received ticker search request for query: AAPL, limit: 10
2025-03-10 01:09:20,233 - app.routes.options - INFO - Calling market_data_service.search_tickers with query: AAPL
2025-03-10 01:09:20,233 - app.services.market_data - INFO - MarketDataService.search_tickers called with query: AAPL
2025-03-10 01:09:20,233 - app.services.market_data - INFO - Delegating to provider: YFinanceProvider
2025-03-10 01:09:20,233 - app.services.yfinance_provider - INFO - search_tickers called with query: AAPL
2025-03-10 01:09:20,233 - app.services.yfinance_provider - INFO - Standardized ticker: AAPL
2025-03-10 01:09:20,233 - app.services.yfinance_provider - INFO - Checking cache for key: yfinance:ticker_validation:AAPL
2025-03-10 01:09:20,234 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:ticker_validation:AAPL
2025-03-10 01:09:20,234 - app.services.yfinance_provider - INFO - Cache hit for yfinance:ticker_validation:AAPL: ['AAPL']
2025-03-10 01:09:20,234 - app.services.market_data - INFO - Provider returned results: ['AAPL']
2025-03-10 01:09:20,234 - app.routes.options - INFO - Received results from market_data_service: ['AAPL']
2025-03-10 01:09:20,235 - app.routes.options - INFO - Returning limited results: ['AAPL']
2025-03-10 01:09:25,298 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-10 01:09:25,299 - app.routes.options - INFO - Received ticker search request for query: AAPL, limit: 10
2025-03-10 01:09:25,299 - app.routes.options - INFO - Calling market_data_service.search_tickers with query: AAPL
2025-03-10 01:09:25,299 - app.services.market_data - INFO - MarketDataService.search_tickers called with query: AAPL
2025-03-10 01:09:25,299 - app.services.market_data - INFO - Delegating to provider: YFinanceProvider
2025-03-10 01:09:25,299 - app.services.yfinance_provider - INFO - search_tickers called with query: AAPL
2025-03-10 01:09:25,299 - app.services.yfinance_provider - INFO - Standardized ticker: AAPL
2025-03-10 01:09:25,299 - app.services.yfinance_provider - INFO - Checking cache for key: yfinance:ticker_validation:AAPL
2025-03-10 01:09:25,301 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:ticker_validation:AAPL
2025-03-10 01:09:25,301 - app.services.yfinance_provider - INFO - Cache hit for yfinance:ticker_validation:AAPL: ['AAPL']
2025-03-10 01:09:25,301 - app.services.market_data - INFO - Provider returned results: ['AAPL']
2025-03-10 01:09:25,301 - app.routes.options - INFO - Received results from market_data_service: ['AAPL']
2025-03-10 01:09:25,301 - app.routes.options - INFO - Returning limited results: ['AAPL']
2025-03-10 01:10:28,728 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-10 01:10:28,728 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: AAPL
2025-03-10 01:10:28,728 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:AAPL
2025-03-10 01:10:28,728 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:AAPL
2025-03-10 01:10:28,728 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:AAPL, returning price: 239.07000732421875
2025-03-10 01:10:28,728 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-10 01:10:28,728 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: AAPL
2025-03-10 01:10:28,728 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:AAPL
2025-03-10 01:10:28,729 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:AAPL
2025-03-10 01:10:28,729 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:AAPL, returning price: 239.07000732421875
2025-03-10 01:10:28,729 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-10 01:10:28,729 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: META
2025-03-10 01:10:28,729 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:META
2025-03-10 01:10:28,729 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:META
2025-03-10 01:10:28,729 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:META, returning price: 625.6599731445312
2025-03-10 01:10:28,729 - app.services.market_data - INFO - Using market data provider: YFinanceProvider
2025-03-10 01:10:28,729 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: get_stock_price called for ticker: META
2025-03-10 01:10:28,729 - app.services.yfinance_provider - DEBUG - DEBUG_OPTION_CHAIN: Checking cache with key: yfinance:stock_price:META
2025-03-10 01:10:28,729 - app.services.yfinance_provider - DEBUG - Database cache hit for yfinance:stock_price:META
2025-03-10 01:10:28,729 - app.services.yfinance_provider - INFO - DEBUG_OPTION_CHAIN: Cache hit for yfinance:stock_price:META, returning price: 625.6599731445312
